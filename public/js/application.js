!function(){"use strict";function e(e,t,o){var n=this;n.initialize=function(){o.getUser().then(function(e){e.data.success?n.user=e.data.data:delete n.user,n.isLoggedIn=n.user?!0:!1,console.log("USER : ",n.user)})},n.initialize(),e.$on("$routeChangeStart",n.initialize),n.login=function(){t.location.href="/auth/instagram"},n.logout=function(){console.log("logout"),o.logout(),delete n.user},n.menuStyle="collapse navbar-collapse",n.menuClick=function(){"navbar-collapse"==n.menuStyle?n.menuStyle="collapse navbar-collapse":n.menuStyle="navbar-collapse"}}angular.module("AppController",[]).controller("AppController",e),e.$inject=["$rootScope","$window","Auth"]}(),function(){"use strict";function e(e,t,o){var n=this;n.leftPanel="",n.markerData={lat:34.052,lng:-118.243,imgUrl:"http://www.keenthemes.com/preview/metronic/theme/assets/global/plugins/jcrop/demos/demo_files/image1.jpg"};var r={lat:34.05223,lng:-118.24368};document.getElementById("map").style.height=window.innerHeight-70+"px";var a=function(){var e={zoom:15,center:new google.maps.LatLng(r.lat,r.lng)};n.map=new google.maps.Map(document.getElementById("map"),e),n.marker=new google.maps.Marker({position:new google.maps.LatLng(n.markerData.lat,n.markerData.lng),title:"my marker",icon:new google.maps.MarkerImage(n.markerData.imgUrl,null,null,null,new google.maps.Size(70,70))}),n.marker.setMap(n.map),google.maps.event.addListener(n.marker,"click",function(){"igShow"==n.leftPanel?(console.log("if"),n.leftPanel="",document.querySelector("#map").className="map_inactive",document.querySelector("#side").className="side_inactive"):"igPost"==n.leftPanel?(console.log("else if"),n.igShowClass=""):(console.log("else"),n.leftPanel="igShow",document.querySelector("ig-show").className="",document.querySelector("#map").className="map_active",document.querySelector("#side").className="side_active")}),setInterval(function(){n.markerData.lat-=1e-5,n.markerData.lng-=1e-5,n.marker.setPosition(new google.maps.LatLng(n.markerData.lat,n.markerData.lng))},60)};a(),console.dir(n.map)}angular.module("MapController",[]).controller("MapController",e),e.$inject=["$rootScope","$window","Auth"]}(),function(){"use strict";function e(e,t){var o={};return o}angular.module("AppService",["ngRoute"]).factory("AppService",e),e.$inject=["$location","$window"]}(),function(){"use strict";function e(e,t,o,n){var r={};return r.logout=function(){n.setToken(),o.path("/")},r.isLoggedIn=function(){return n.getToken()?!0:!1},r.getUser=function(){return n.getToken()?e.get("/api/me"):t.reject({message:"User has no token"})},r}function t(e){var t={};return t.getToken=function(){return e.get("token")},t.setToken=function(t){t?e.put("token",t):e.remove("token")},t}function o(e,t,o){var n={};return n.request=function(e){var t=o.getToken();return t&&(e.headers["x-access-token"]=t),e},n.responseError=function(n){return 403==n.status&&(o.setToken(),t.path("/")),e.reject(n)},n}angular.module("AuthService",[]).factory("Auth",e).factory("AuthToken",t).factory("AuthInterceptor",o),e.$inject=["$http","$q","$location","AuthToken"],t.$inject=["$cookies"],o.$inject=["$q","$location","AuthToken"]}(),function(){"use strict";function e(){return{restrict:"E",templateUrl:"directives/ig_show.html"}}function t(){return{restrict:"E",templateUrl:"directives/ig_post.html"}}angular.module("MapDirectives",[]).directive("igShow",e).directive("igPost",t)}(),function(){"use strict";function e(e,t){e.when("/",{templateUrl:"views/welcome.html",controller:"AppController",controllerAs:"appCtrl",requireLogin:!1}).when("/app",{templateUrl:"views/app.html",controller:"MapController",controllerAs:"mapCtrl",requireLogin:!0}).otherwise("/"),t.html5Mode(!0)}angular.module("app.routes",["ngRoute"]).config(e),e.$inject=["$routeProvider","$locationProvider"]}(),function(){"use strict";function e(e){e.interceptors.push("AuthInterceptor")}function t(e,t,o,n){e.$on("$locationChangeStart",function(e,r,a){for(var l in t.routes)-1!=r.indexOf(l)&&t.routes[l].requireLogin&&!n.isLoggedIn()&&(alert("Please login first :D"),e.preventDefault(),o.location.href="/")})}angular.module("iBalloon",["app.routes","ngCookies","AppController","MapController","AppService","AuthService","MapDirectives"]).config(e).run(t),e.$inject=["$httpProvider"],t.$inject=["$rootScope","$route","$window","Auth"]}();